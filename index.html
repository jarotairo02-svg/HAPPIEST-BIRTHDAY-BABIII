<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Babi</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    background: linear-gradient(to top, #001a4d, white); /* dark blue to white */
    overflow: hidden;
    font-family: "Yuji Boku", cursive; /* cute Japanese calligraphy font */
  }

  h1 {
    font-size: 2.5em;
    margin: 20px;
    color: #ff4d6d;
    text-shadow: 2px 2px white;
  }

  .cake-container {
    position: relative;
    width: 300px;
    height: 400px;
  }

  .cake-layer {
    position: absolute;
    width: 100%;
    opacity: 0;
    transform: translateY(-200px);
    transition: transform 1s ease, opacity 1s ease;
  }

  .cake-layer.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Candle flame */
  .flame {
    position: absolute;
    top: 40px;
    left: 50%;
    width: 20px;
    height: 30px;
    margin-left: -10px;
    background: radial-gradient(circle, orange 40%, yellow 70%, transparent 80%);
    border-radius: 50% 50% 50% 50%;
    animation: flicker 0.3s infinite alternate;
    z-index: 10;
  }

  @keyframes flicker {
    from { transform: scale(1); opacity: 1; }
    to { transform: scale(1.1); opacity: 0.8; }
  }

  /* Smoke effect */
  .smoke {
    position: absolute;
    top: 20px;
    left: 50%;
    width: 30px;
    height: 30px;
    margin-left: -15px;
    background: url('https://i.ibb.co/zP8jF2R/smoke.gif') no-repeat center/contain;
    opacity: 0;
    pointer-events: none;
  }

  .smoke.visible {
    opacity: 1;
  }

  /* Confetti */
  .confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background: red;
    top: -10px;
    opacity: 0.8;
    animation: fall linear forwards;
  }

  @keyframes fall {
    to {
      transform: translateY(100vh) rotate(720deg);
    }
  }
</style>
</head>
<body>

<div class="cake-container">
  <!-- Cake layers (use real strawberry cake with candle images) -->
  <img src="https://i.ibb.co/d2sP8sM/strawberry-cake-base.png" class="cake-layer" id="layer1">
  <img src="https://i.ibb.co/d2sP8sM/strawberry-cake-base.png" class="cake-layer" id="layer2">
  <img src="https://i.ibb.co/d2sP8sM/strawberry-cake-base.png" class="cake-layer" id="layer3">
  <img src="https://i.ibb.co/d2sP8sM/strawberry-cake-base.png" class="cake-layer" id="layer4">

  <!-- Candle flame & smoke -->
  <div class="flame" id="flame"></div>
  <div class="smoke" id="smoke"></div>
</div>

<h1>Happy Birthday, My Dearest Babi&lt;3</h1>

<audio id="song">
  <source src="https://files.catbox.moe/0g7h9k.mp3" type="audio/mpeg">
</audio>

<script>
  const layers = [
    document.getElementById("layer1"),
    document.getElementById("layer2"),
    document.getElementById("layer3"),
    document.getElementById("layer4")
  ];
  const flame = document.getElementById("flame");
  const smoke = document.getElementById("smoke");
  const song = document.getElementById("song");

  let playing = false;

  function startCake() {
    playing = true;
    song.currentTime = 0;
    song.play();

    // Drop layers one by one
    layers.forEach((layer, i) => {
      setTimeout(() => {
        layer.classList.add("visible");
      }, i * 1000);
    });

    // Flame on
    flame.style.display = "block";
    smoke.classList.remove("visible");

    // Candle blow after 5s
    setTimeout(() => {
      flame.style.display = "none";
      smoke.classList.add("visible");
      launchConfetti();
    }, 5000);
  }

  function launchConfetti() {
    setInterval(() => {
      const confetti = document.createElement("div");
      confetti.classList.add("confetti");
      confetti.style.left = Math.random() * window.innerWidth + "px";
      confetti.style.background = `hsl(${Math.random()*360}, 100%, 50%)`;
      confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
      document.body.appendChild(confetti);

      setTimeout(() => confetti.remove(), 5000);
    }, 100);
  }

  // Restart when clicked after song
  document.body.addEventListener("click", () => {
    if (!playing) {
      startCake();
    } else if (song.ended) {
      // reset
      layers.forEach(layer => layer.classList.remove("visible"));
      flame.style.display = "block";
      smoke.classList.remove("visible");
      playing = false;
    }
  });
</script>

</body>
</html>
